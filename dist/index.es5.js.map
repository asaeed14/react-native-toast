{"version":3,"file":"index.es5.js","sources":["../src/Toast/style.ts","../src/Toast/index.tsx","../src/Toast/ToastContext.tsx"],"sourcesContent":["// @ts-ignore\nimport { StyleSheet, Platform } from 'react-native';\n\nconst style = StyleSheet.create({\n  toastWrapper: {\n    position: 'absolute',\n    flexDirection: 'row',\n    alignItems: 'center',\n    alignSelf: 'center',\n    padding: 12,\n    textAlign: 'center',\n    zIndex: 100000000000,\n    backgroundColor: 'rgba(0, 0, 0, 0.75)',\n    borderRadius: 6,\n  },\n  toastMessage: {\n    color: '#ffffff',\n    fontWeight: '600',\n  },\n  animation: {\n    width: 40,\n    height: 40,\n  },\n});\n\nexport default style;\n","/**\n *\n * Toast\n *\n */\nimport React, {\n  useEffect,\n  useRef,\n  forwardRef,\n  useImperativeHandle,\n  useReducer,\n} from 'react';\n// @ts-ignore\nimport { Animated, Text } from 'react-native';\nimport style from './style';\nimport { ToastProps, IToastShow } from '../types';\n\nconst initialState = {\n  showToast: false,\n  delay: 1000,\n  message: 'Welcome to react-native-js-toast',\n  bottomSpace: 32,\n  topSpace: 32,\n  position: 'bottom',\n};\n\nconst stateReducer = (state: IToastShow, action: any): IToastShow => {\n  switch (action.type) {\n    case 'SHOW_TOAST':\n      return {\n        ...state,\n        showToast: action.payload,\n      };\n    case 'UPDATE_ALL':\n      return {\n        ...state,\n        message: action.payload.message,\n        delay: action.payload.delay | initialState.delay,\n        bottomSpace: action.payload.bottomSpace | initialState.bottomSpace,\n        topSpace: action.payload.topSpace | initialState.topSpace,\n        position: action.payload.position\n          ? action.payload.position\n          : state.position,\n      };\n\n    default:\n      return initialState;\n  }\n};\n\nconst Toast: React.FC<ToastProps> = forwardRef((_props, ref) => {\n  const [state, dispatch] = useReducer(stateReducer, initialState);\n  const animatedValue = useRef(new Animated.Value(0)).current;\n\n  useImperativeHandle(ref, () => ({\n    show({ message, delay, bottomSpace, topSpace, position }: IToastShow) {\n      if (message) {\n        dispatch({\n          type: 'UPDATE_ALL',\n          payload: {\n            message,\n            delay,\n            bottomSpace,\n            topSpace,\n            position,\n          },\n        });\n      }\n      dispatch({\n        type: 'SHOW_TOAST',\n        payload: true,\n      });\n    },\n  }));\n\n  useEffect(() => {\n    if (state.showToast) {\n      Animated.sequence([\n        Animated.timing(animatedValue, {\n          toValue: 1,\n          duration: 200,\n          useNativeDriver: false,\n        }),\n        Animated.timing(animatedValue, {\n          toValue: 0,\n          duration: 300,\n          delay: state.delay,\n          useNativeDriver: false,\n        }),\n      ]).start(() =>\n        dispatch({\n          type: 'SHOW_TOAST',\n          payload: false,\n        }),\n      );\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [state.showToast]);\n\n  return (\n    <Animated.View\n      style={[\n        style.toastWrapper,\n        { opacity: animatedValue },\n        state.position === 'bottom'\n          ? { bottom: state.bottomSpace }\n          : { top: state.topSpace },\n      ]}\n    >\n      <Text style={[style.toastMessage]}>{state.message}</Text>\n    </Animated.View>\n  );\n});\n\nexport default React.memo(Toast);\n","import React, { useContext, useRef } from 'react';\nimport Toast from './index';\nimport { IToastShow, IToast, ToastContextProps } from '../types';\n\nconst ToastContext = React.createContext({} as IToast);\n\nconst ToastProvider: React.FC<ToastContextProps> = (props) => {\n  const toastRef = useRef(null);\n  const show = ({\n    delay,\n    message,\n    position,\n    bottomSpace,\n    topSpace,\n  }: IToastShow) => {\n    if (toastRef.current) {\n      // @ts-ignore\n      toastRef.current.show({\n        delay,\n        message,\n        position,\n        bottomSpace,\n        topSpace,\n      });\n    }\n  };\n  return (\n    <ToastContext.Provider value={{ show }}>\n      {props.children}\n      <Toast ref={toastRef} />\n    </ToastContext.Provider>\n  );\n};\n\nconst ToastConsumer = ToastContext.Consumer;\n\nfunction useToastContext(): IToast {\n  return useContext(ToastContext);\n}\n\nexport { ToastProvider, useToastContext };\n"],"names":["Toast"],"mappings":"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"}